<!-- Add this CSS to your existing <style> block -->
<style>
/* Existing styles... */

.history-list {
    color: white;
    list-style: none;
    padding: 0;
    margin-top: 1rem;
}

.history-item {
    background: #2d2d2d;
    margin-bottom: 0.5rem;
    padding: 0.75rem;
    border-radius: 4px;
    border-left: 4px solid #57ff00;
    font-size: 0.9rem;
}

.sticky-action {
    background: black;
    padding: 10px;
    border-bottom: 1px solid #57ff00;
    margin-bottom: 1rem;
    display: flex;
    justify-content: center;
}

/* Mobile adjustments for 2026 standards */
@media (max-width: 768px) {
    .container { 
        display: flex; 
        flex-direction: column; 
    }
    button {
        width: 100%; /* Larger tap targets for mobile */
        margin-bottom: 10px;
    }
}
</style>

<!-- Updated Captain Picker Tab HTML -->
<div id="captainTab" class="tab-content" style="display: none;">
    <!-- Sticky Quick-Action for Mobile -->
    <div class="sticky-action">
        <button onclick="pickCaptains()" style="background-color: #57ff00; color: black; font-weight: bold; padding: 0 2rem;">
            PICK CAPTAINS NOW
        </button>
    </div>

    <div class="container">
        <div class="segment">
            <div class="input-block">
                <button onclick="saveLineup()">Save Lineup</button>
                <button onclick="loadLineup()"> Load Lineup</button>
            </div>
            <h3>Available Players</h3>
            <div id="captain-message" class="message"></div>
            <table id="captain-roster">
                <thead>
                    <th><input type="checkbox" onchange="captainSelectAll()" id="captain-select-all" checked></th><th>#</th><th>Name</th>
                </thead>
                <tbody id="captain-roster-body"></tbody>
            </table>
            <div class="input-block">
                <button onclick="resetCaptainPool()">Reset Pool & History</button>
            </div>
        </div>
        
        <div class="segment">
            <h3>History</h3>
            <div id="captains-output" class="message" style="color: #57ff00; font-size: 1.1rem; border-bottom: 1px solid #333; padding-bottom: 10px;">
                No captains selected yet.
            </div>
            <ul id="captain-history" class="history-list">
                <!-- History items will appear here -->
            </ul>
        </div>
    </div>
</div>

<script>
// New global variable for tracking session history
CAPTAIN_HISTORY = [];

// --- Update these functions in your script block ---

function resetCaptainPool() {
    for (let i = 0; i < ROSTER.length; i++) {
        ROSTER[i].available = true;
    }
    CAPTAIN_HISTORY = []; // Clear history on reset
    document.getElementById('captain-history').innerHTML = '';
    document.getElementById('captain-select-all').checked = true;
    document.getElementById('captains-output').innerHTML = 'Pool and history reset.';
    refreshCaptainRoster();
}

function pickCaptains() {
    const availablePlayers = ROSTER.filter(player => player.available);

    if (availablePlayers.length < 2) {
        document.getElementById('captains-output').innerHTML = 'Not enough players. Reset the pool.';
        return;
    }

    const index1 = Math.floor(Math.random() * availablePlayers.length);
    const c1 = availablePlayers.splice(index1, 1)[0];
    const index2 = Math.floor(Math.random() * availablePlayers.length);
    const c2 = availablePlayers[index2];

    // Current Selection Display
    const resultText = `${c1.name} (#${c1.number}) & ${c2.name} (#${c2.number})`;
    document.getElementById('captains-output').innerHTML = `Latest: ${resultText}`;

    // Update History
    CAPTAIN_HISTORY.unshift(resultText); // Add to top of list
    updateHistoryUI();

    // Mark as unavailable
    const rIdx1 = ROSTER.findIndex(p => p.number === c1.number && p.name === c1.name);
    const rIdx2 = ROSTER.findIndex(p => p.number === c2.number && p.name === c2.name);
    if (rIdx1 !== -1) ROSTER[rIdx1].available = false;
    if (rIdx2 !== -1) ROSTER[rIdx2].available = false;

    refreshCaptainRoster();
}

function updateHistoryUI() {
    let html = '';
    CAPTAIN_HISTORY.forEach((entry, index) => {
        html += `<li class="history-item"><strong>Round ${CAPTAIN_HISTORY.length - index}:</strong> ${entry}</li>`;
    });
    document.getElementById('captain-history').innerHTML = html;
}
</script>
